<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Deployment and Customization â€¢ ruminate</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Deployment and Customization">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ruminate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="external-link nav-link" href="https://runruminate.ubiquity.tools/"><span class="fa fas fa-cloud"></span> Try Online</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-videos" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-video"></span> Videos</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-videos">
<li><a class="external-link dropdown-item" href="https://vimeo.com/1042516737">Introduction and Overview</a></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/1042510561">Getting Started: Wrangling, Plotting and NCA</a></li>
    <li><a class="external-link dropdown-item" href="https://vimeo.com/1045192047">Deployment, App Preloading, and Analysis Workflows</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-chalkboard-teacher"></span> Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../articles/deployment.html">Deployment &amp; Customization</a></li>
    <li><a class="dropdown-item" href="../articles/noncompartmental_analysis.html">Non-Compartmental Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/model_builder.html">Building Models</a></li>
    <li><a class="dropdown-item" href="../articles/clinical_trial_simulation.html">Clinical Trial Simulations</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fas fa-hat-wizard"></span> Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fas fa-rss"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/john-harrold/ruminate/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Deployment and Customization</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/john-harrold/ruminate/blob/HEAD/vignettes/deployment.Rmd" class="external-link"><code>vignettes/deployment.Rmd</code></a></small>
      <div class="d-none name"><code>deployment.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Running ruminate is simple and straight forward using the ruminate
function:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ruminate.ubiquity.tools/">ruminate</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ruminate.html">ruminate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This is the default and presents all of the modules in the standard
format. However you may wish deploy ruminate on an internal server or
customize it.</p>
</div>
<div class="section level2">
<h2 id="deployment">Deployment<a class="anchor" aria-label="anchor" href="#deployment"></a>
</h2>
<p>To deploy ruminate you can create a copy of the app based on a
template in the package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"ruminate"</span>,<span class="st">"templates"</span>, <span class="st">"ruminate.R"</span><span class="op">)</span>, </span>
<span>          to   <span class="op">=</span> <span class="st">"App.R"</span><span class="op">)</span></span></code></pre></div>
<p>Certain features of the app behave differently depending on whether
it is running locally or deployed on a server. To <em>tell</em> the App
it is deployed you need to create an empty file named
<code>DEPLOYED</code> in the same directory as the deployed app
file.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.create</a></span><span class="op">(</span><span class="st">"DEPLOYED"</span><span class="op">)</span></span></code></pre></div>
<p>Those two files (<code>App.R</code> and <code>DEPLOYED</code>) placed
in the same direcory on a shiny server with ruminate installed should be
enough to deploy the basic app.</p>
</div>
<div class="section level2">
<h2 id="customization">Customization<a class="anchor" aria-label="anchor" href="#customization"></a>
</h2>
<p>You can open the <code>App.R</code> file and run the app locally from
there as well. You can also edit this file to customize the app. This
includes the default text that is presented, any graphics you might
want, and also the color scheme. Beyond that the individual modules are
also customizable.</p>
<div class="section level3">
<h3 id="app-layout">App Layout<a class="anchor" aria-label="anchor" href="#app-layout"></a>
</h3>
<p>The app is built around modules and the overall look and introductory
text is controlled by this file. The default app uses the
<a href="http://rstudio.github.io/shinydashboard/" class="external-link">shinydashboard</a> package. You can look through the
documentation for that package to alter tabs, the default skin color,
module icons, etc. The default package contains all of the modules, but
you can simply remove the tabs for any modules you do not want.</p>
</div>
<div class="section level3">
<h3 id="individual-modules">Individual Modules<a class="anchor" aria-label="anchor" href="#individual-modules"></a>
</h3>
<p>At the top of the <code>App.R</code> file the locations of module
configuration files are defined:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">formods.yaml</span>  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"formods"</span>,  <span class="st">"templates"</span>,  <span class="st">"formods.yaml"</span><span class="op">)</span></span>
<span><span class="va">ASM.yaml</span>      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"formods"</span>,  <span class="st">"templates"</span>,  <span class="st">"ASM.yaml"</span><span class="op">)</span></span>
<span><span class="va">UD.yaml</span>       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"formods"</span>,  <span class="st">"templates"</span>,  <span class="st">"UD.yaml"</span><span class="op">)</span></span>
<span><span class="va">DW.yaml</span>       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"formods"</span>,  <span class="st">"templates"</span>,  <span class="st">"DW.yaml"</span><span class="op">)</span></span>
<span><span class="va">FG.yaml</span>       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"formods"</span>,  <span class="st">"templates"</span>,  <span class="st">"FG.yaml"</span><span class="op">)</span></span>
<span><span class="va">NCA.yaml</span>      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"ruminate"</span>, <span class="st">"templates"</span>,  <span class="st">"NCA.yaml"</span><span class="op">)</span></span>
<span><span class="va">MB.yaml</span>       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"ruminate"</span>, <span class="st">"templates"</span>,  <span class="st">"MB.yaml"</span><span class="op">)</span></span>
<span><span class="va">CTS.yaml</span>      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"ruminate"</span>, <span class="st">"templates"</span>,  <span class="st">"CTS.yaml"</span><span class="op">)</span></span></code></pre></div>
<p>Each of these controls different aspects of the module including the
text displayed, icons used, certain behaviors of the app, default
values, etc. These options and are described in the comments of the
configuration files. To use these you need to first make a copy of the
specific configuration file. For example, to customize the NCA module
you would make a copy of the <code>NCA.yaml</code> file:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"ruminate"</span>, <span class="st">"templates"</span>,  <span class="st">"NCA.yaml"</span><span class="op">)</span>,</span>
<span>          to   <span class="op">=</span> <span class="st">"myNCA.yaml"</span><span class="op">)</span></span></code></pre></div>
<p>Then you can make any changes you want in the <code>myNCA.yaml</code>
file. Then you need specify in the <code>App.R</code> file that you want
to use the new configuration file.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">NCA.yaml</span>      <span class="op">=</span> <span class="st">"myNCA.yaml"</span></span></code></pre></div>
<p>You can do the same thing for the other modules as well.</p>
</div>
<div class="section level3">
<h3 id="reporting-templates">Reporting Templates<a class="anchor" aria-label="anchor" href="#reporting-templates"></a>
</h3>
<p>To use your own organizational templates you need to create
<code>onbrand</code> Word and PowerPoint templates using the methods
described here:</p>
<ul>
<li><a href="https://onbrand.ubiquity.tools/articles/Custom_Office_Templates.html" class="external-link">Creating
onbrand templates</a></li>
<li><a href="https://formods.ubiquity.tools/articles/included_modules.html#avialable-modules" class="external-link">formods
reporting templates</a></li>
</ul>
<p>Place the Word (<code>report.docx</code>), PowerPoint
(<code>report.pptx</code>), and YAML (<code>report.yaml</code>) files in
a <code>templates</code> directory. Then you need to create a copy of
the <code>formods</code> YAML file in the deployment folder.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"formods"</span>, <span class="st">"templates"</span>,  <span class="st">"formods.yaml"</span><span class="op">)</span>,</span>
<span>          to   <span class="op">=</span> <span class="st">"myformods.yaml"</span><span class="op">)</span></span></code></pre></div>
<p>Next you need to edit the <code>myformods.yaml</code> file to ensure
those new files are used by editing the <code>include</code> section to
update the sources for each file. See below:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">FM</span><span class="op">:</span> </span>
<span>  <span class="va">include</span><span class="op">:</span></span>
<span>    <span class="va">files</span><span class="op">:</span></span>
<span>    <span class="op">-</span> <span class="va">file</span><span class="op">:</span></span>
<span>        <span class="va">source</span><span class="op">:</span> <span class="st">'file.path(".", "templates", "report.docx")'</span></span>
<span>        <span class="va">dest</span><span class="op">:</span>   <span class="st">'file.path("config","report.docx")'</span></span>
<span>    <span class="op">-</span> <span class="va">file</span><span class="op">:</span></span>
<span>        <span class="va">source</span><span class="op">:</span> <span class="st">'file.path(".", "templates", "report.pptx")'</span></span>
<span>        <span class="va">dest</span><span class="op">:</span>   <span class="st">'file.path("config","report.pptx")'</span></span>
<span>    <span class="op">-</span> <span class="va">file</span><span class="op">:</span></span>
<span>        <span class="va">source</span><span class="op">:</span> <span class="st">'file.path(".", "templates", "report.yaml")'</span></span>
<span>        <span class="va">dest</span><span class="op">:</span>   <span class="st">'file.path("config","report.yaml")'</span></span></code></pre></div>
<p>Then change the <code>App.R</code> file to point to the new
<code>myformods.yaml</code> file.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Harrold.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
